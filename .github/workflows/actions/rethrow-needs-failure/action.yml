name: Fail on needs

runs:
  using: composite
  steps:
    - name: Fail job if any needs failed
      if: always() && !cancelled() && contains(needs.*.result, 'failure')
      run: exit 1
